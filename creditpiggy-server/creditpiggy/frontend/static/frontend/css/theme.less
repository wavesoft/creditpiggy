
.transition(@params) {
 -webkit-transition: @params;
    -moz-transition: @params;
    -o-transition: @params;
       transition: @params; }

// Achievement box size
@achievement-board-size: 120px;

// =================================
//  GENERAL STRUCTURES
// =================================

// Fixes for background image
// ---------------------------------
html {
	min-height: 100%;
}

// Body configurations
// ---------------------------------
body {
	background-image: url(../img/background.jpg);
	background-repeat: no-repeat;
	background-size: cover;
	background-attachment: fixed;
	min-height: 100%;
	font-size: 16px;
}

h2, h3 {
	font-family: "Roboto","Helvetica Neue",Helvetica,Arial,sans-serif;
    margin: 10px 0 13px;
    font-weight: 300;
    line-height: 1.4;
}
h2 {
    font-size: 24px;
}
h3 {
    font-size: 18px;
}

.img-dim {
	img, .glyphicon {
		opacity: 0.5;
	}
}

.icon-coink {
	display: inline;
	background-image: url(../img/coink.png);
	background-repeat: no-repeat;
	background-size: contain;
	padding: 12px;
	width: 24px;
	line-height: 0;
	vertical-align: middle;
}

.inactive {
	-webkit-filter: grayscale(100%);
	filter: grayscale(100%);
	filter: gray;
	filter: url("data:image/svg+xml;utf8,<svg version='1.1' xmlns='http://www.w3.org/2000/svg' height='0'><filter id='greyscale'><feColorMatrix type='matrix' values='0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0' /></filter></svg>#greyscale");
	opacity: 0.7;
}

// A div that can be used as full background
// ---------------------------------
div.back-splash {
	position: fixed;
	z-index: -1;
	left: 0; right: 0;
	width: 100%; height: 100%;

	background-repeat: no-repeat;
	background-size: cover;
}

// A framed div with soft shadow
// ---------------------------------
div.framed-soft-shadow {
    background-color: #FFF;
    box-shadow: inset 0 10px 10px -10px rgba(0,0,0,0.15);
    -moz-box-shadow: inset 0 10px 10px -10px rgba(0,0,0,0.15);
    -ms-box-shadow: inset 0 10px 10px -10px rgba(0,0,0,0.15);
    -o-box-shadow: inset 0 10px 10px -10px rgba(0,0,0,0.15);
 }
@media (min-width: 768px) {
	div.framed-soft-shadow {
	    border-radius: 10px;
	    box-shadow: inset 0 0 10px rgba(0,0,0,0.15);
	    -moz-box-shadow: inset 0 0 10px rgba(0,0,0,0.15);
	    -ms-box-shadow: inset 0 0 10px rgba(0,0,0,0.15);
	    -o-box-shadow: inset 0 0 10px rgba(0,0,0,0.15);
	}
}

// Solid body container
// ---------------------------------
div.container.solid {
	background-color: #f9f9f9;
}
@media (min-width: 768px) {
	div.container.solid {
		margin-top: 25px;	
	}
}

// Horizontal piggy logo helper
// ---------------------------------
.piggy-logo-header {
    height: 80px;
    position: relative;
    margin-top: 10px;

    .logo {
		width: 126px;
	    height: 126px;
	    border-radius: 63px;
	    padding-left: 5px;
	    padding-top: 4px;
	    position: absolute;
	    right: 0;
    }
}

// Green border and back
// ---------------------------------
.btn-achieved {
	border: solid 1px #4caf50;
	background-color: #E0F1E0;
}

// Image fixation for the log-in logo
// ---------------------------------
.login-logo {
	padding: 10px;

	img.slogan, img.logo {
		width: 90%;
		max-height: 100%;
	}
	.spaced-icon {
		margin-top: 15%;
	}
	.row > div {
		text-align: center;
	}
	h4 {
	    text-shadow: #fff 1px 1px;
	}

    .logo-framed {
		border: solid #eee;
		border-radius: 13px;
		box-shadow: rgba(0,0,0,0.5) 2px 2px 3px;
    }
}
@media (min-width: 768px) {
	.login-logo .spaced-icon {
		margin-top: 10px;
	}
}

// Composition for structuring login
// page elements
// ---------------------------------
.piggylogo-big {
	> img {
		width: 100%;
		&.flat {
			display: block;
		}
		&.big {
			display: none;
		}
	}
}
.spacer-5 {
	margin-top: 5px;
}
@media (min-width: 768px) {

	.piggylogo-big {
		> img {
			&.flat {
				display: none;
			}
			&.big {
				display: block;
			}
		}
	}

	.header-spacer {
		height: 60px;
	}

	.spacer-5 {
		margin-top: 0;
	}

}

// Plots
// ---------------------------------
div.plot {
	div.plot-graph {
		height: 200px;
	}
}

// Account panel
// ---------------------------------
a.panel-account {
	display: block;
	text-align: center;
	background-color: #9C27B0;
	color: #FFF;

	&:hover {
		background-color: #A448B7;
	}

	img {
		background-color: #FFF;
		width: 58px;
		max-height: 58px;
		border-radius: 100px;
		border: solid 4px #CC99CC;
		margin: 10px auto;
	}

	div.account-name {
		height: 75px;
		line-height: 75px;

		> div {
			vertical-align: middle;
			line-height: 16px;
			display: inline-block;
		}
	}

}
@media (min-width: 768px) {
	a.panel-account {
		height: 150px;

		div.account-name {
			> div {
				vertical-align: middle;
			}
		}

	}
}

// Big metrics panel
// ---------------------------------
div.metrics {
	padding: 4px;

	.head {
		font-weight: bold;
	}
	.own {
		color: #9C27B0;
		text-align: left;
		font-size: 16px;
	}
	.own-label {
		font-size: 16px;
		text-align: right;
		color: #9C27B0;
		opacity: 0.5;
	}

	> div {
		font-size: 16px;
		i {
			font-size: 20px;
		}
	}
}
div.big-metrics {
	margin: 10px 5px;
}
@media (min-width: 768px) {
	div.big-metrics {
		> div > div > div > div {
			border-right: solid 1px #666;
			&.own {
				border-right: solid 1px #fff;
			}
		}
		> div > div:last-child > div > div {
			border-right: none !important;
		}
	}
}

// Individual big metric
// ---------------------------------
div.big-metric {
	font-size: 20px;
	text-align: right;

	.own {
		background-color: #9C27B0;
		color: #FFF;
	}
	.own-label {
	    font-style: italic;
		color: #B163C1;
	}

	i {
		color: #999;
	}
	.subtitle {
		text-align: center;
		font-size: 14px;
		padding-top: 8px;
	}

}
@media (min-width: 768px) {
	div.big-metric {
		text-align: center;
		.own {
			text-align: center;
		}
		> div {
			.subtitle {
				padding-top: 0;
			}
		}
	}
}

// Individual small metric
// ---------------------------------
div.micro-metric {
	font-size: 1em;
	text-align: left;
	margin-bottom: 5px;
	i { color: #666; }
	.subtitle {
		text-align: right;
		&::after {
			content: ":";
		}
	}

}
@media (min-width: 768px) {
	div.micro-metric {
		text-align: center;
		.subtitle {
			text-align: center;
			font-size: 0.8em;
			opacity: 0.5;
			&::after {
				content: "";
			}
		}
	}
}

// Pin-based login
// ---------------------------------
#login-pin input {
    font-size: 2em;
    height: 60px;
}

// =================================
//  STYLING FOR P_WHEADER
// =================================

div.panel-page-header {

	div.panel-project {
		height: 150px;
		position: relative;

		background-image: url(http://test4theory.cern.ch/about/img/behind.jpg);
		background-size: cover;
		background-repeat: no-repeat;
		overflow: hidden;
		background-position: 0 0;

		div.panel-project-title {
			position: absolute;	
			left: 0; top: 10px; width: 100%;
			padding: 4px 5px 4px 20px;

			div.title-content {
				position: relative;
				h1 {
				    color: inherit;
					font-family: "Roboto","Helvetica Neue",Helvetica,Arial,sans-serif;
				    font-weight: 300;
				    line-height: 1.4;
				    font-size: 28px;
				    margin: 2px 0;
				}
				p {
					opacity: 0.6;
					color: inherit;
					font-size: 14px;
				    margin: 2px 0;
				}

			}

			div.title-back {
				height: 100%;
				left: 0px;
			    right: 0px;
				position: absolute;

				// background-image: url(http://test4theory.cern.ch/about/img/behind.jpg);
				background-size: cover;
				background-repeat: no-repeat;
				// overflow: hidden;
				background-position: 0 -12px;

			    -webkit-filter: blur(20px);
			    -moz-filter: blur(20px);
			    -o-filter: blur(20px);
			    -ms-filter: blur(20px);
			    filter: blur(20px);
			    opacity: 0.8;

			}

		}

	}
}

// =================================
//  ELEMENT HELPERS
// =================================

// A colored bullet used in legends
// ---------------------------------
.legend-bullet {
	display: inline-block;
	vertical-align: middle;
	width: 32px;
	height: 16px;
	margin-right: 10px;
}

.panel-legend {
	font-size: 12px;
}

// A blurred element
// ---------------------------------
.blur {
	-webkit-filter: blur(10px);
	-moz-filter: blur(10px);
	-o-filter: blur(10px);
	-ms-filter: blur(10px);
	filter: blur(10px);
}


// Pull-left icons of social buttons
// ---------------------------------
.btn-social {
	i {
		float: left;
		font-size: 1.5em;
		margin-top: -3px;
  	}
}

// In-line form in header text
// ---------------------------------
.form-inline {
	p, h1, h2, h3, h4 {
		input {
			font-size: inherit;
			vertical-align: 0px;
		}
	}
}

// Smaller text
// ---------------------------------
.text-smaller {
	font-size: 14px;
}

// Loading indicator 
// ---------------------------------
.loading-indicator {
	height: 30px;
	background-image: url(../img/loading.gif);
	background-repeat: no-repeat;
	background-position: center center;
}

// Credit/rank panel
// ---------------------------------
div.credit-rank-panel {
	text-align: center;
	margin: 0 25px 4px 0;
	> div > div {
		margin-top: 20px;
	}

	.credit-header {
		font-size: 0.8em;
		color: #CCC;
	}

	.credit-body {

		.credit {
			font-size: 3em;
			font-weight: bold;
			line-height: 105px;

			&.credit-smaller {
				font-size: 2em;
			}
			&.credit-smallest {
				font-size: 1.4em;
			}
		}

		.rank-laurel{
			margin: 0 auto;
			width: 128px;
			height: 105px;
			background-repeat: no-repeat;
			background-position: center center;
			position: relative;

			&.rank-laurel-green {
				background-image: url(../img/status/laurel-green.png);
				.rank-circle, .rank-top {
					color: green;
				}
			}
			&.rank-laurel-gold {
				background-image: url(../img/status/laurel-gold.png);
				.rank-circle, .rank-top {
					color: #FF931E;
				}
			}
			&.rank-laurel-gray {
				background-image: url(../img/status/laurel-gray.png);
				.rank-circle, .rank-top {
					color: #999;
				}
			}

			.rank-circle {
				width: 80px;
				height: 80px;
				border-radius: 40px;
				position: absolute;
				top: 0; left: 22px;
			}

			&.rank-with-top {
				.rank-top {
					position: absolute;
					left: 0; top: 0; width: 100%;
					font-size: 0.8em;
				}
			}

			&.rank-size-2 > .rank-circle  {
				font-size: 3em;
				font-weight: bold;
				line-height: 80px;
			}
			&.rank-size-3 > .rank-circle  {
				font-size: 2em;
				font-weight: bold;
				line-height: 80px;
			}
			&.rank-size-4 > .rank-circle  {
				font-size: 1.5em;
				font-weight: bold;
				line-height: 80px;
			}

		}

	}

}
@media (min-width: 768px) {
    .credit-rank-panel {
		> div > div {
			margin-top: 0;
		}
    }
}

// Achievements layout
// ---------------------------------
div.achievements {
	> div {
		padding: 5px;
		label {
			width: 100px;
		}
		.icon {
			position: relative;
			width: 48px;
			height: 48px;
			margin: 0 auto;
			background-position: center center;
			background-size: contain;
			background-repeat: no-repeat;

			.badge {
				display: block;
				position: absolute;
				right: -2px;
				bottom: -2px;
				height: 18px;
				// color: #000;
				// font-size: 20px;
			}
		}

	}
}

// Candidate (Next) Achievement
// ---------------------------------
.next-achievement {

	background-color: #FFF;
	border-radius: 10px;
	padding: 10px;
	margin-top: 20px;

	-webkit-box-shadow: 1px 1px 5px 0px rgba(0,0,0,0.4);
	-moz-box-shadow: 1px 1px 5px 0px rgba(0,0,0,0.4);
	box-shadow: 1px 1px 5px 0px rgba(0,0,0,0.4);

	p {
		margin-bottom: 5px;
	}

	p.teaser {
		font-weight: bold;
	}

	.title {
		font-family: "Roboto","Helvetica Neue",Helvetica,Arial,sans-serif;
	    margin: 10px 0 13px;
	    font-weight: 300;
	    line-height: 1.4;
	    font-size: 1.2em;
	}

	img {
		max-width: 60px;
	}
}

// Achievements Board
// ---------------------------------
.achievement-board {
	text-align: center;

	.achievements {
		margin: 0 auto;

		> div.icon {
			background-size: contain;
			background-repeat: no-repeat;
			background-position: center center;
			// display: inline-block;
			position: relative;
			float: left;
			width: @achievement-board-size;
			height: @achievement-board-size;

			> a.project-button {

				width:  @achievement-board-size/3;
				height:  @achievement-board-size/3;
				position: absolute;
				bottom: 10px;
				right: 10px;
				padding: 2px;

				opacity: 0;
				.transition( opacity 0.25s ease-in );

				> span.icon {
					display: inline-block;
					width: @achievement-board-size/3-8;
					height: @achievement-board-size/3-8;
					background-size: contain;
					background-repeat: no-repeat;
					background-position: center center;
				}
			}

			&:hover {
				> a.project-button {
					opacity: 1.0;
				}
			}
		}
	}

}

// Resize achievements layout according to the screen size
@media (min-width: 430px) {
	.achievement-board > .achievements { width: 3 *@achievement-board-size;  };
	.achievement-board > .achievements > div.icon {
		// 3-wide
		&:nth-child(5n+1) { clear: left;}
		&:nth-child(5n+4) { clear: left; margin-left: @achievement-board-size/2; }
	}
}
@media (min-width: 550px) {
	.achievement-board > .achievements { width: 4 *@achievement-board-size;  };
	.achievement-board > .achievements > div.icon {
		// 3-wide
		&:nth-child(5n+1) { clear: none;}
		&:nth-child(5n+4) { clear: none; margin-left: 0; }
		// 4-wide
		&:nth-child(7n+1) { clear: left;}
		&:nth-child(7n+5) { clear: left; margin-left: @achievement-board-size/2; }
	}
}
@media (min-width: 670px) {
	.achievement-board > .achievements { width: 5 *@achievement-board-size;  };
	.achievement-board > .achievements > div.icon {
		// Reset 4-wide
		&:nth-child(7n+1) { clear: none;}
		&:nth-child(7n+5) { clear: none; margin-left: 0; }
		// 5-wide
		&:nth-child(9n+1) { clear: left; }
		&:nth-child(9n+6) { clear: left; margin-left: @achievement-board-size/2; }
	}
}
@media (min-width: 992px) {
	.achievement-board > .achievements { width: 7 *@achievement-board-size;  };
	.achievement-board > .achievements > div.icon {
		// Reset 5-wide
		&:nth-child(9n+1) { clear: none; }
		&:nth-child(9n+6) { clear: none; margin-left: 0; }
		// 7-wide
		&:nth-child(13n+1) { clear: left; }
		&:nth-child(13n+8) { clear: left; margin-left: @achievement-board-size/2; }
	}
}
@media (min-width: 1200px) {
	.achievement-board > .achievements { width: 9 *@achievement-board-size;  };
	.achievement-board > .achievements > div.icon {
		// Reset 7-wide
		&:nth-child(13n+1) { clear: none; }
		&:nth-child(13n+8) { clear: none; margin-left: 0; }
		// 9-wide
		&:nth-child(17n+1) { clear: left; }
		&:nth-child(17n+10) { clear: left; margin-left: @achievement-board-size/2; }
	}
}

// =================================
//  COMPLEX COMPONENTS
// =================================

// Utility for auto-collapsing body
// ---------------------------------
div.collapsible {
	> div {
		.transition( max-height 0.25s ease-in );
		overflow: hidden;
		max-height: 500px;
		position: relative;
		margin-bottom: 10px;

		&:after {
			.transition( top 0.25s ease-in );
		    content: " ";
		    display: block;
		    background-color: #fefefe;
		    height: 3px;
		    position: absolute;
		    width: 100%;
		    box-shadow: #fefefe 0px -4px 15px;
		    top: 500px;
		}
	}
	> input {
		height: 1px; width: 1px;
		position: absolute;
		visibility: hidden;
		&:checked + div {
			.transition( max-height 0.25s ease-out );
			max-height: 65px;
			&:after {
				.transition( top 0.25s ease-out );
			    top: 65px;
			}
		}
		&:checked + div + label > span:after {
			content: "Read more";
		}
	}
	> label {
		float: right;
		> span::after {
			content: "Read less";
			font-size: 14px;
			color: #29ABE2;
			cursor: pointer;
		}
	}
}
