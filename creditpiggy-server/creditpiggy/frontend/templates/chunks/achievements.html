{% load piggy_extras %}
<h2>Achievements</h2>
<div class="achievements">
	{% for a in achievements %}
		<div class="btn btn-default" data-popup-id="#achievement-payload-{{ forloop.counter }}">
			<label>{{ a.achievement.name }}</label>
			<div class="icon" style="background-image: url( {{ a.achievement.icon }} )">
				{% if a.achieved %}
				<i class="fa fa-check-circle edge-badge"></i>
				{% endif %}
			</div>
		</div>
		<div id="achievement-payload-{{ forloop.counter }}" class="modal fade">
		  <div class="modal-dialog">
		    <div class="modal-content">
		      <div class="modal-header">
		        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
		        <h4 class="modal-title">{{ a.achievement.name }}</h4>
		      </div>
		      <div class="modal-body">
				<div class="row">
					<div class="col-sm-4">
						<img src="{{ a.achievement.icon }}" style="width: 100%" />
					</div>
					<div class="col-sm-8">
						<!-- Description -->
						{{ a.achievement.desc|safe }}
						<!-- Unlocked / Achieved date -->
						{% if a.achieved %}
							<p class="text-success">
								Achieved on <strong>{{ a.achieved.date|timestamp }}</strong>
							</p>
						{% endif %}
						<!-- Requirements -->
						<table class="table table-condensed">
							<tr>
								<th>Counter</th>
								<th>Value</th>
							</tr>
							{% for k,v in a.achievement|get_metrics %}
							<tr>
								<td>{{ k }}</td>
								<td>&gt;= {{ v }}</td>
							</tr>
							{% endfor %}
						</table>
					</div>
				</div>
		      </div>
		      <div class="modal-footer">
		        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
		      </div>
		    </div>
		  </div>
		</div>
	{% endfor %}
</div>
<br />